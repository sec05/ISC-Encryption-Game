import{w}from"./with-props-Dcn5r2gA.js";import{q as S,a as n,n as t}from"./chunk-GNGMS2XR-ClVmEp-r.js";const j=()=>{const o=S(),h=e=>{o(e)},[c,l]=n.useState("select"),[N,u]=n.useState(null),[m,s]=n.useState(""),[i,d]=n.useState(""),[g,x]=n.useState(-1),[p,f]=n.useState("");n.useEffect(()=>{const e=localStorage.getItem("name");e?(f(e),console.log("Name found in localStorage:",e)):h("/")},[]);const y=async e=>{if(e)try{const a=await fetch(`http://127.0.0.1:5555/challenge/${e}`);if(!a.ok)throw new Error("Failed to fetch challenge");const r=await a.json();console.log("Challenge data received:",r),u(e),s(r.challenge||"No challenge received!"),x(r.id??-1),l("playing")}catch(a){console.error("Error fetching challenge:",a),s("Error loading challenge. Please try again.")}},b=async()=>{try{const e=await fetch(`http://127.0.0.1:5555/challenge/${g}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({answer:i,name:p})});if(!e.ok)throw new Error("Failed to submit answer");const a=await e.json();console.log("Response data:",a),a.status==="correct"&&(l("select"),d(""),alert("Correct! Well done."),s(""))}catch{alert("error with answer! try again")}};return t.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-900 text-white",children:[c==="select"&&t.jsxs("div",{className:"text-center",children:[t.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Select Difficulty"}),t.jsx("div",{className:"flex space-x-4",children:["easy","medium","hard"].map(e=>t.jsx("button",{onClick:()=>y(e),className:"px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-xl text-lg transition-transform duration-300 hover:scale-105",children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),c==="playing"&&t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Decrypt:"}),t.jsx("p",{className:"mb-4 text-lg",children:m}),t.jsx("input",{type:"text",value:i,onChange:e=>d(e.target.value),className:"px-4 py-2 rounded-lg border-2 border-gray-300 focus:border-blue-500 outline-none",placeholder:"Enter answer"}),t.jsx("button",{onClick:b,className:"mt-4 px-6 py-2 bg-green-500 hover:bg-green-600 text-white rounded-xl text-lg transition-transform duration-300 hover:scale-105",children:"Submit"})]})]})};function E({}){return[{title:"ISC Encryption Game!"},{name:"description"}]}const D=w(function(){return t.jsx(j,{})});export{D as default,E as meta};
